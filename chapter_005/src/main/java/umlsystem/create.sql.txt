
create table rules(
	id serial primary key, 
	name varchar(2000)
	);

create table role(
	id serial primary key,
	name varchar(2000)
	);

create table role_rules(
	id serial primary key,
	name varchar(2000),
	role_id int references role(id),
	rules_id int references rules(id)
	);
				
create table category(
	id serial primary key,
	name varchar(2000)
	);
	
create table state(
	id serial primary key,
	state varchar(2000)
	);
	
create table users(
	id serial primary key,
	name varchar(2000),
	login varchar(2000),
	password varchar (2000),
	role_id int references role(id),
	item_it int references state(id)
);

create table item(
	id serial primary key,
	name varchar(2000),
	description varchar(2000),
	users_id int references users(id),
	category_id int references category(id),
	state_id int references state(id)
);

create table attaches(
	id serial primary key,
	name varchar(2000),
	description varchar(2000),
	item_id int references state(id)
);

create table comments(
	id serial primary key,
	name varchar(2000),
	item_id int references item(id)
);

insert into rules (name) values ('Using');

insert into role (name) values ('Admin'), ('User'), ('Visitor');

insert into role_rules (name, role_id, rules_id) values ('Rules for users', (select id from role where name = 'User'), (select id from rules where name = 'User'));

insert into category (name) values ('tasks'), ('reports');

insert into state (state) values ('new'), ('open'), ('close');

insert into users (name, login, password, role_id) values ('Vasya', 'Admin', 'password', (select id from role where name = 'Admin'));
																						 
insert into item (name, description, users_id, category_id, state_id) values ('Test', 'Test descriptions', (select id from users where name = 'Admin'),
(select id from category where name = 'Admin'), (select id from state where state = 'Admin'));
												 
insert into attaches (name, description, item_id) values ('Test attaches name', ' Test attaches description', (select id from item where name = 'Test'));
																											   
insert into comments (name, item_id) values ('Test comment', (select id from item where name = 'Test'));																											   
